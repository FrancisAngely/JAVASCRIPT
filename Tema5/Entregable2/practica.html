<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>

  <body>
    <script>
      class videojuego {
        constructor(nombre, genero, plataforma) {
          this.nombre = nombre;
          this.genero = genero;
          this.plataforma = plataforma;
        }
      }

      class Torneo {
        constructor() {
          this.videojuegos = [];
        }

        insertVJ(videojuego) {
          this.videojuegos.push(videojuego);
        }

        deleteName(nombre) {
          for (let videoj of this.videojuegos) {
            let index;
            if (videoj.nombre === nombre) {
              index = this.videojuegos.indexOf(videoj);
              this.videojuegos.splice(index, 1);
              console.log("El videojuego se ha eliminado correctamente");
              break;
            }
          }
        }

        look(genero) {
          const videojuegosFiltrados = [];
          for (let videojuego of this.videojuegos) {
            if (videojuego.genero === genero) {
              videojuegosFiltrados.push(videojuego);
            }
          }
          console.log(
            "Videojuegos del género '" + genero + "':",
            videojuegosFiltrados
          );
        }

        mostrarVJ() {
          console.table(this.videojuegos);
        }

        calculateGamesAvailable() {
          return this.videojuegos.length;
        }
      }

      class Participante {
        constructor(nombre, edad, nivel) {
          this.nombre = nombre;
          this.edad = edad;
          this.nivel = nivel;
        }
      }

      class Jugador extends Participante {
        constructor(nombre, edad, nivel, ranking) {
          super(nombre, edad, nivel);
          this.ranking = ranking;
        }

        mejorarRanking() {
          this.ranking++;
          console.log("El jugador ha mejorado su ranking a " + this.ranking);
        }
      }

      class Espectador extends Participante {
        constructor(nombre, edad, nivel, preferencia) {
          super(nombre, edad, nivel);
          this.preferencia = preferencia;
        }
      }

      function validarNick(apodo) {
        const regex = /^[a-zA-Z0-9]+$/;
        return regex.test(apodo);
      }

      class Competencia {
        constructor() {
          this.participantes = [];
        }

        agregarParticipante(participante) {
          this.participantes.push(participante);
        }

        convertirAJSON() {
          return JSON.stringify(this.participantes);
        }

        convertirDeJSON(json) {
          return JSON.parse(json);
        }
      }

      // Prueba
      const torneos = new Torneo();

      const vj1 = new videojuego("FIFA-2025", "Fútbol", "Origin");
      const vj2 = new videojuego("Tekken 8", "Lucha", "Stream");
      const vj3 = new videojuego(
        "Prince of Persia: The Lost Crown",
        "Acción-Aventura",
        "PlayStation 4"
      );

      torneos.insertVJ(vj1);
      torneos.insertVJ(vj2);
      torneos.insertVJ(vj3);
      torneos.mostrarVJ();

      torneos.deleteName("FIFA-2025");
      torneos.mostrarVJ();
      console.log(
        "El total de juegos disponibles es " + torneos.calculateGamesAvailable()
      );
      torneos.look("Lucha");

      const competencia = new Competencia();

      const jugador1 = new Jugador("Jugador1", 25, 10, 1);
      const jugador2 = new Jugador("Jugador2", 30, 15, 2);
      const espectador1 = new Espectador("Espectador1", 20, 5, "Fútbol");

      competencia.agregarParticipante(jugador1);
      competencia.agregarParticipante(jugador2);
      competencia.agregarParticipante(espectador1);

      const json = competencia.convertirAJSON();
      console.log("JSON:", json);

      const participantes = competencia.convertirDeJSON(json);
      console.log("Participantes:", participantes);

      // Modificar el nivel de un jugador
      participantes[0].nivel = 20;
      console.log("Participantes actualizados:", participantes);
    </script>
  </body>
</html>
